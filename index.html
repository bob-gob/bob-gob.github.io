<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite 4 | Access Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { background-color: #0b101b; color: #00d4ff; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; }
        .global-lock-active { border: 10px solid #ff4d4d !important; animation: redPulse 1.5s infinite; }
        @keyframes redPulse { 0% { box-shadow: inset 0 0 50px #ff4d4d; } 50% { box-shadow: inset 0 0 100px #ff4d4d; } 100% { box-shadow: inset 0 0 50px #ff4d4d; } }
        .box { border: 2px solid #00d4ff; padding: 40px; border-radius: 20px; text-align: center; background: rgba(0, 0, 0, 0.95); max-width: 450px; width: 90%; }
        input { background: #000; border: 1px solid #00d4ff; color: #39FF14; padding: 12px; text-align: center; width: 100%; outline: none; font-size: 1.2em; margin: 20px 0; }
        button { background: #00d4ff; border: none; padding: 12px 25px; cursor: pointer; font-weight: bold; color: #000; width: 100%; transition: 0.2s; }
        button:hover { background: #39FF14; }
        #sync-screen, #wipe-screen, #login-screen, #loading-screen, #final-dashboard { display: none; }
        .spinner { border: 5px solid rgba(0, 212, 255, 0.1); border-left-color: #39FF14; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        #final-dashboard { width: 95%; max-width: 1200px; flex-direction: column; align-items: center; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; width: 100%; margin-top: 20px; }
        .card { background: rgba(255, 255, 255, 0.05); border: 1px solid #00d4ff; padding: 30px; border-radius: 15px; text-align: center; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div class="box" id="sync-screen" style="display: block;">
        <div class="spinner"></div>
        <p>INITIALIZING GLOBAL SYNC...</p>
    </div>

    <div class="box" id="wipe-screen">
        <h1 style="color: #ff4d4d;">GLOBAL LOCKDOWN</h1>
        <input type="password" id="override-pass" placeholder="TYPE 18GB">
        <button onclick="globalRestore()" style="background: #ff4d4d; color: #fff;">RESTORE SYSTEM</button>
    </div>

    <div class="box" id="login-screen">
        <h1>SYSTEM ENCRYPTED</h1>
        <input type="password" id="user-pass" placeholder="ACCESS KEY" autofocus>
        <button id="validate-btn" onclick="checkLogin()">VALIDATE</button>
        <p id="attempt-warning" style="color: #ff4d4d; font-size: 0.8em; margin-top: 15px;"></p>
    </div>

    <div class="box" id="loading-screen">
        <div class="spinner"></div>
        <h2>DECRYPTING...</h2>
    </div>

    <div id="final-dashboard">
        <h2 style="color: #39FF14;">ACCESS GRANTED</h2>
        <div class="gallery">
            
            <div class="card" style="border-color: #fff;">
                <h3 style="color: #fff; letter-spacing: 2px;">ASTRONAUT: MONDAY COMPLETION</h3>
                <button onclick="alert('Accessing...')">OPEN</button>
            </div>

            <div class="card" style="border-color: #ff4d4d;">
                <h3 style="color: #ff4d4d; letter-spacing: 2px;">BLACK DRAGON & RED OCTOPUS</h3>
                <button onclick="alert('Accessing...')">OPEN</button>
            </div>

        </div>

        <div class="card" style="margin-top: 20px; width: 300px; padding: 15px;">
            <div id="qrcode" style="background: #fff; padding: 5px; margin: 0 auto; width: 100px;"></div>
            <p style="font-size: 0.7em; margin-top: 10px;">LOGS: <span id="override-count">0</span></p>
        </div>
        
        <button onclick="location.reload()" style="margin-top: 20px; width: auto; background: none; color: #ff4d4d; border: 1px solid #ff4d4d; padding: 10px 30px;">LOGOUT</button>
    </div>

    <script>
        const NAMESPACE = "elite4_portal_v3";
        const KEY = "global_lock";
        const API = `https://api.counterapi.dev/v1/${NAMESPACE}/${KEY}`;

        let attempts = 0;

        async function init() {
            try {
                const res = await fetch(API);
                const data = await res.json();
                document.getElementById('override-count').innerText = Math.floor(data.count / 2);
                if (data.count % 2 !== 0) {
                    document.body.classList.add('global-lock-active');
                    showScreen("wipe-screen");
                } else {
                    showScreen("login-screen");
                }
            } catch (e) {
                showScreen("login-screen");
            }
            new QRCode(document.getElementById("qrcode"), { text: window.location.href, width: 100, height: 100 });
        }

        function showScreen(id) {
            document.querySelectorAll('.box, #final-dashboard').forEach(d => d.style.display = 'none');
            document.getElementById(id).style.display = (id === "final-dashboard") ? "flex" : "block";
        }

        async function checkLogin() {
            const val = document.getElementById("user-pass").value.toLowerCase();
            if (val === "printing4" || val === "admin") {
                showScreen("loading-screen");
                setTimeout(() => showScreen("final-dashboard"), 1000);
            } else {
                attempts++;
                document.getElementById("attempt-warning").innerText = `ATTEMPTS: ${attempts}/10`;
                if (attempts >= 10) {
                    await fetch(API + "/up");
                    location.reload();
                }
            }
        }

        async function globalRestore() {
            if (document.getElementById("override-pass").value.toLowerCase() === "18gb") {
                await fetch(API + "/up");
                location.reload();
            }
        }

        init();
    </script>
</body>
</html>
